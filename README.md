# BankRank - расчёт рейтинга пользователей групп VK как потенциальных заёмщиков

Данный репозиторий является курсовым проектом по дисциплине [Наука о данных и аналитика больших объемов информации](https://github.com/Tka4uk-Andrei/semesters_description/blob/master/semester_1.md#наука-о-данных-и-аналитика-больших-объемов-информации) в рамках программы магистратуры `09.04.04 Программная инженерия` (профиль `09.04.04_02 Основы анализа и разработки приложений с большими объемами распределенных данных`) в [Санкт-Петербургском политехническом университете](https://www.spbstu.ru).

Данный дистрибутив не содержит элеметов для горизонтального масштабирования. Дистрибутив с полным стеком технологий расположен по следующей [(TODO) ссылке](TODO).

Над кодом для данного проекта работали:
- Алексеева Марина([@A-Marina](https://github.com/A-Marina))
- Ласточкина Алина([@Alina923](https://github.com/Alina923))
- Ткачук Андрей([@Tka4uk-Andrei](https://github.com/Tka4uk-Andrei))

## Навигация
- [Краткое описание проекта](#краткое-описание-проекта)
- [Инструкции по настройке окружения](#инструкции-по-настройке-окружения)
- [Получение `Access token` для API ВКонтакте](#получение-access-token-для-api-вконтакте)
- [Инструкции по работе с проектом](#инструкции-по-работе-с-проектом)

## Краткое описание проекта

__TODO description__

[Назад к навигации](#навигация)

---
## Инструкции по настройке окружения

1. При работе использовать `python 3.6`
2. Скачать и распаковать [репозиторий](https://github.com/Tka4uk-Andrei/BankRank/archive/refs/heads/main.zip)
3. Перейти в папку с репозиторием и  выполнить следующие комманды:
   ```bash
   python3 -m venv venv
   ```
4. Перейти в виртуальное окружение выполнив в терминале комманду
   ```bash 
   source venv/bin/activate
   ```
5. Установить зависимости выполнив
   ```bash
   pip install -r requirements.txt
   ```

[Назад к навигации](#навигация)

---

## Получение `Access token` для API ВКонтакте

1. Во ВКонтакте создайте Standalone приложение на следующей [странице](https://vk.com/apps?act=manage).
2. Получите `client_id`. Для этого cнова перейдите на страницу с вашими приложениями. Нажмите на кнопку "Редактировать" рядом с 
   нужным приложением. В адресной строке появится его id. Например в этой ссылке `https://vk.com/editapp?id=8005064` видно, что 
   `client_id` равен `8005064`.
3. Создайте ссылку для получения ключа. В качестве шаблона используйте следующую ссылку:
   ``` 
       https://oauth.vk.com/authorize?client_id=ТУТ_ДОЛЖЕН_БЫТЬ_client_id&display=page&scope=friends&response_type=token&v=5.92&state=123456
   ```
  В данной ссылке нужно изменить только значение после `client_id` на значение получанное вами на предыдущих шагах.
4. Перейдите по собранной ссылке в браузере. Вы получите `access_token` — строку наподобие `533bacf01e1165b57531ad114461ae8736d6506a3`. 
   Она появится в адресной строке, подписанная как `access_token`. Если в адресной строке появился `code=` вместо `access_token=`, 
   проверьте правильность собранной ранее строки.

> Учтите, что сгенерированный `access_token` действует всего лишь день. После истечения времени жизни `access_token` требуется обновить для этого нужно выполнить только шаг 4.

> Более [подробную инструкцию](https://dev.vk.com/api/access-token/implicit-flow-user) по поводу получения `access_token` можно посмотреть на официальном сайте ВКонтакте для разработчиков

[Назад к навигации](#навигация)

---

## Инструкции по работе с проектом

1. Перед запуском скриптов проверить, что виртуальное окружение запущено и настроенно согласно [инструкции](#инструкции-по-настройке-окружения)
2. Проверьте, что `access_token` сгенерирован согласно [инструкции](#получение-access-token-для-api-вконтакте) выше
3. Перед запуском скриптов в файле `settings.py` задайте нужные значения для следующих переменных:
    - `ACCESS_TOKEN` - строка, содержащая `access_token` для взаимодействия с API ВК;
    - `VK_GROUP_ID` - id группы ВК, из которой беруться id пользователей для анализа;
    - `ID_DATA_PATH` - путь к файлу, где храняться список id пользователей;
    - `DATE_DATA_PATH` - путь к файлу, где храняться список id пользователей и дат создания страниц;
    - `USER_DATA_FILE_PATH` - путь к файлу, где храняться данные о пользователях;
    - `RANKED_USER_FILE_PATH` - путь к файлу, где храняться данные о пользователях с рассчитанным 
      рейтингом;
    - `USERS_WITH_DELETED_PAGES_PATH` - путь к файлу, где храняться пользователи, страницы которых либо 
      заблокированны, либо закрыты для просмотра;
4. Чтобы произвести загрузку данных выполните следующую комманду:
  ```bash
    python user_id_load_from_group.py && python age_wall.py && python user_data_load.py 
  ```
5. Для рассчёта рейтинга требуется выполнить:
  ```bash
    python calculator.py
  ```
6. Для запуска web-приложения на Flask требуется выполнить следующую комманду:
  ```bash
    python web/web.py
  ```
7. Скрипты для визуализация графиков представленна в файле [`graphs.ipynb`](graphs.ipynb)

[Назад к навигации](#навигация)
